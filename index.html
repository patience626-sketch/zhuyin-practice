<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>注音練習小遊戲（GitHub Pages）</title>
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <div class="app">
    <header class="topbar">
      <div class="brand">
        <div class="title">注音練習小遊戲</div>
        <div class="subtitle">模式 1 聽音選｜模式 2 找出全部目標｜模式 3 依序散找（保留進度）</div>
      </div>

      <div class="stats">
        <div class="chip">分數 <span id="score">0</span></div>
        <div class="chip">錯誤 <span id="wrong">0</span></div>
      </div>
    </header>

    <nav class="modes">
  <button class="modeBtn active" data-mode="1">模式 1：聽音選</button>
  <button class="modeBtn" data-mode="2">模式 2：找出全部</button>
  <button class="modeBtn" data-mode="3">模式 3：依序散找</button>

  <div class="playerWrap">
    <span class="playerLabel">玩家</span>
    <select id="playerSelect" class="playerSelect"></select>
    <button id="btnResetPlayer" class="ghost smallBtn" title="只清除目前玩家的分數/錯誤">清除本玩家</button>
    <button id="btnWrongbook" class="ghost smallBtn" title="查看各模式錯題與再練">錯題本</button>
  </div>

  <div class="spacer"></div>

  <button id="btnNew" class="ghost">下一題</button>
  <button id="btnReplay" class="ghost">重播/再念一次</button>
</nav>

    <main class="panel">
      <section class="question">
        <div class="q-left">
          <div class="q-title" id="qTitle">載入中...</div>
          <div class="q-sub" id="qSub"> </div>
        </div>

        <div class="q-right">
          <label class="toggle">
            <input type="checkbox" id="soundToggle" checked />
            <span>音效</span>
          </label>
          <label class="toggle">
            <input type="checkbox" id="ttsToggle" checked />
            <span>TTS 念出注音</span>
          </label>
          <label class="toggle">
  <span>TTS 速度</span>
  <select id="ttsSpeedSelect">
    <option value="slow">慢</option>
    <option value="normal" selected>中</option>
    <option value="fast">快</option>
  </select>
</label>
        </div>
      </section>

      <!-- Mode 1 -->
      <section id="mode1" class="modeSection">
        <div class="row">
          <div class="hint">按「重播」可再聽一次。答對會自動跳題。</div>
        </div>
        <div id="choices" class="choices"></div>
      </section>

      <!-- Mode 2 -->
      <section id="mode2" class="modeSection hidden">
        <div class="row">
          <div class="hint">把所有目標都找出來才過關。點錯會閃紅。</div>
          <div class="progress" id="m2Progress"></div>
        </div>
        <div id="grid2" class="grid"></div>
      </section>

      <!-- Mode 3 -->
      <section id="mode3" class="modeSection hidden">
        <div class="row">
          <div class="hint">依序點出目標序列（散在符號海裡）。點錯閃紅，但<strong>保留進度</strong>。</div>
          <div class="progress" id="m3Progress"></div>
        </div>
        <div id="sequenceBar" class="sequenceBar"></div>
        <div id="grid3" class="grid"></div>
      </section>
<section id="wrongbookPanel" class="wrongbook hidden">
  <div class="wbHeader">
    <div>
      <div class="wbTitle">錯題本（<span id="wbPlayerName"></span>）</div>
      <div class="wbSub">依照玩家分開記錄。可直接「錯題再練」。</div>
    </div>
    <div class="wbActions">
      <button id="btnCloseWrongbook" class="ghost">關閉</button>
    </div>
  </div>

  <div class="wbGrid">
    <div class="wbCard">
      <div class="wbCardTitle">模式1：聽音選（答錯題）</div>
      <div class="wbList" id="wbM1List"></div>
      <div class="wbCardActions">
        <button id="btnPracticeM1" class="modeBtn">錯題再練（模式1）</button>
        <button id="btnClearM1" class="ghost">清除此區</button>
      </div>
    </div>

    <div class="wbCard">
      <div class="wbCardTitle">模式2/3：常點錯符號（誤點統計）</div>
      <div class="wbList" id="wbMisclickList"></div>
      <div class="wbCardActions">
        <button id="btnPracticeMisclick" class="modeBtn">用常錯符號練（模式2）</button>
        <button id="btnClearMisclick" class="ghost">清除此區</button>
      </div>
    </div>

    <div class="wbCard">
      <div class="wbCardTitle">模式3：卡關序列（點錯次數）</div>
      <div class="wbList" id="wbSeqList"></div>
      <div class="wbCardActions">
        <button id="btnPracticeSeq" class="modeBtn">練卡關序列（模式3）</button>
        <button id="btnClearSeq" class="ghost">清除此區</button>
      </div>
    </div>
  </div>

  <div class="wbTip">
    小提醒：<strong>錯題再練</strong>會在答對後逐步把錯題數扣回去（越練越少）。
  </div>
</section>
    </main>

    <footer class="footer">
      <div class="small">
        Tips：手機也能玩。若 TTS 沒聲音，先按一次「重播」並允許瀏覽器播放語音。
      </div>
    </footer>
  </div>

  <script src="./app.js"></script>
</body>
</html>
